import discord
from discord.ext import commands
import os

TOKEN = os.getenv("TOKEN")  # RÃ©cupÃ©ration du token depuis une variable d'environnement

bot = commands.Bot(command_prefix="!")

@bot.event
async def on_ready():
    print(f'ConnectÃ© en tant que {bot.user}')

@bot.command()
async def calendrier(ctx):
    """Affiche la date actuelle en Cycle des Souffles avec image du calendrier."""
    
    # DÃ©finition des donnÃ©es du calendrier
    jour_lumharel = "Tel 15 VÃ¦kirn, 1532"
    ere = "Cycle UnifiÃ©"
    festivite = "Aucune"
    phase_lunaire = "Astraelis : ðŸŒ” (Premier Croissant) | VÃ¶rna : ðŸŒ˜ (Dernier Croissant)"
    image_url = "https://your-server.com/calendrier_lumharel_mis_a_jour.png"  # Remplace par l'URL correcte
    
    # CrÃ©ation de l'embed
    embed = discord.Embed(
        title="ðŸ“œ Calendrier du Cycle des Souffles",
        description=f"**Nous sommes le {jour_lumharel} - Ãˆre du {ere}**\n\nâœ¨ *Que les vents de Lumharel vous soient favorables !*",
        color=0xFFD700
    )
    embed.add_field(name="ðŸŽŠ FestivitÃ©", value=festivite, inline=True)
    embed.add_field(name="ðŸŒ™ Phases Lunaires", value=phase_lunaire, inline=True)
    embed.set_image(url=image_url)
    embed.set_footer(text="ðŸ“œ Suivez le cycle, suivez le souffle...")
    
    # Envoi de l'embed
    await ctx.send(embed=embed)

@bot.command()
async def calendrierlien(ctx):
    """Renvoie le lien vers le calendrier complet."""
    await ctx.send("ðŸ”— **Consultez le calendrier complet ici :** https://app.fantasy-calendar.com/calendars/1ead959c9c963eec11424019134c7d78")

# DÃ©marrer le bot
bot.run(TOKEN)

# Fichier requirements.txt
requirements_txt = """discord.py"""

# Fichier service.json
service_json = """{
  "build": {
    "builder": "NIXPACKS",
    "buildCommand": "pip install -r requirements.txt"
  },
  "start": "python bot_calendrier.py"
}"""
